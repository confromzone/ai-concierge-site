<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Nova Concierge ‚Äî Prisijungimas / Registracija</title>
  <meta name="description" content="Prisijunkite arba susikurkite paskyrƒÖ. Vir≈° formos ‚Äî mini ≈æaidimas: ƒØveik bosƒÖ ir gauk ‚àí20% (kodas NOVA20)."/>
  <link rel="canonical" href="https://novaconcierge.online/auth.html"/>

  <!-- Favicon / App Icons -->
  <link rel="icon" href="/favicon.svg?v=4" type="image/svg+xml">
  <link rel="mask-icon" href="/favicon.svg?v=4" color="#4f46e5">
  <link rel="apple-touch-icon" href="/favicon.svg?v=4">
  <meta name="theme-color" content="#0b1220"/>

  <!-- Social preview -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Nova Concierge">
  <meta property="og:title" content="Nova Concierge ‚Äî Prisijungimas / Registracija"/>
  <meta property="og:description" content="Mini ≈æaidimas vir≈° formos: ƒØveik bosƒÖ ir gauk ‚àí20% (NOVA20)."/>
  <meta property="og:url" content="https://novaconcierge.online/auth.html"/>
  <meta property="og:image" content="https://novaconcierge.online/hero.png"/>
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Nova Concierge ‚Äî Prisijungimas / Registracija">
  <meta name="twitter:description" content="Mini ≈æaidimas vir≈° formos: ƒØveik bosƒÖ ir gauk ‚àí20% (NOVA20).">
  <meta name="twitter:image" content="https://novaconcierge.online/hero.png"/>

  <style>
    :root{--bg:#0b1220;--card:#0f172a;--muted:#9aa4b2;--text:#e5eef7;--brand:#4f46e5;--brand-2:#7c3aed;--accent:#22c55e;--border:#1e293b;--light:#f7f9fb}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    header{position:sticky;top:0;z-index:20;background:rgba(11,18,32,.85);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--border)}
    .wrap{max-width:1120px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;gap:18px;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{width:28px;height:28px;border-radius:7px}
    nav{display:flex;gap:16px;align-items:center}
    nav a{color:var(--muted)}
    nav a:hover{color:#fff}
    .lang-toggle{display:flex;gap:8px}
    .lang-toggle button{padding:6px 10px;border:1px solid var(--border);border-radius:8px;background:#111827;color:#cbd5e1;cursor:pointer}
    .lang-toggle button.active{background:var(--brand);border-color:var(--brand);color:#fff}

    main{max-width:960px;margin:0 auto;padding:36px 20px 64px;display:grid;gap:20px}
    .pill{display:inline-flex;gap:8px;align-items:center;background:#0f172a;border:1px solid var(--border);padding:6px 10px;border-radius:999px;color:#a3b1c4;font-size:14px}

    /* === Mini ≈æaidimas === */
    #nc-game-wrap{position:relative;margin:0 auto;max-width:min(100%, 960px);isolation:isolate;}
    #nc-game{width:100%;height:auto;aspect-ratio: 940/320;display:block;border-radius:16px;
      background:linear-gradient(180deg,#090e1a,#11192e);
      box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.04)}
    .nc-banner{position:absolute;left:12px;top:-18px;z-index:3;background:linear-gradient(180deg, rgba(34,43,72,.95), rgba(25,32,60,.92));
      color:#e8ecff;border:1px solid rgba(120,130,160,.35);padding:8px 12px;border-radius:10px;font:600 13px/1.2 system-ui}
    .nc-banner b{color:var(--brand-2)}
    .nc-hud{position:absolute;top:10px;right:10px;display:flex;flex-direction:column;gap:8px;min-width:220px;font:600 14px/1.3 system-ui;z-index:3}
    .nc-hud-row{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;background:rgba(20,28,52,.55);
      border:1px solid rgba(120,130,160,.35);padding:8px 10px;border-radius:10px;color:#e8ecff;backdrop-filter:saturate(120%) blur(4px)}
    .nc-hud .bar{height:10px;background:rgba(255,255,255,.08);border-radius:20px;overflow:hidden}
    .nc-hud .bar i{display:block;height:100%;width:100%;background:linear-gradient(90deg,var(--brand-2),#22d3ee)}
    .nc-hint{position:absolute;left:14px;bottom:10px;color:#aeb7d6;background:rgba(27,36,64,.6);
      padding:8px 12px;border-radius:10px;border:1px solid rgba(120,130,160,.3);font:500 13px;z-index:3}

    /* Pilno ekrano mygtukas */
    .nc-fs{position:absolute;right:10px;bottom:10px;z-index:3;display:flex;gap:8px;align-items:center}
    .nc-fs button{cursor:pointer;border-radius:10px;border:1px solid rgba(120,130,160,.35);background:#0f172a;color:#e5eef7;padding:8px 10px}

    .nc-win{position:absolute;right:16px;bottom:16px;max-width:360px;z-index:4;background:rgba(18,24,46,.96);color:#e8ecff;
      border:1px solid rgba(120,130,160,.35);padding:14px 16px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.35);font:500 14px}
    .nc-win code{background:rgba(124,58,237,.18);border:1px solid rgba(124,58,237,.45);padding:2px 6px;border-radius:6px;color:#fff;font-weight:700}

    @media(max-width:640px){#nc-game{border-radius:12px}.nc-hud{min-width:200px}.nc-hint{font-size:12px}}

    /* === Auth kortelƒó === */
    .auth-card{margin:10px auto 0;background:#0f172a;border:1px solid var(--border);border-radius:16px;padding:18px 18px 22px;max-width:680px}
    .auth-tabs{display:flex;gap:8px;border-bottom:1px solid var(--border);margin-bottom:12px}
    .auth-tabs button{background:#101828;border:1px solid var(--border);color:#cbd5e1;padding:10px 14px;border-radius:10px 10px 0 0;cursor:pointer}
    .auth-tabs button.active{background:linear-gradient(135deg,var(--brand),var(--brand-2));border-color:transparent;color:#fff}
    .auth-forms form{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px}
    .auth-forms .full{grid-column:1/-1}
    .auth-forms label{font-size:14px;color:#bac6d6}
    .auth-forms input{width:100%;padding:12px;border:1px solid #203049;background:#0b1220;color:#eaf0ff;border-radius:10px}
    .auth-forms .note{font-size:13px;color:#8ea0b8}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:6px}
    .btn{padding:12px 16px;border-radius:10px;border:1px solid var(--border);background:#101828;color:#cbd5e1}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));border:0;color:#fff}
    .btn.ghost{background:#0f172a}
    .help{display:flex;gap:12px;justify-content:space-between;align-items:center;margin-top:8px;color:#9fb3ff}

    footer{border-top:1px solid var(--border);padding:22px 20px;color:#a7b2c1}
    footer a{color:#cfe2ff}
    @media (max-width:740px){.auth-forms form{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <img src="/favicon.svg?v=4" alt="Nova Concierge">
        <strong>Nova Concierge</strong>
      </div>
      <nav>
        <a href="/" data-lang="en">Home</a>
        <a href="/" data-lang="lt" style="display:none">Pagrindinis</a>
        <a href="/#pricing" data-lang="en">Pricing</a>
        <a href="/#pricing" data-lang="lt" style="display:none">Kainos</a>
        <a href="/#contact" data-lang="en">Contact</a>
        <a href="/#contact" data-lang="lt" style="display:none">Kontaktai</a>
      </nav>
      <div class="lang-toggle">
        <button id="btn-en">EN</button>
        <button id="btn-lt" class="active">LT</button>
      </div>
    </div>
  </header>

  <main>
    <div class="pill" data-lang="en">Sign in or create your account ‚Äî beat the boss above and grab <b>‚àí20%</b> with code NOVA20</div>
    <div class="pill" data-lang="lt" style="display:none">Prisijunkite arba susikurkite paskyrƒÖ ‚Äî ƒØveikite bosƒÖ vir≈°uje ir gaukite <b>‚àí20%</b> su kodu NOVA20</div>

    <!-- MINI ≈ΩAIDIMAS -->
    <section id="nc-game-wrap" aria-label="Nova Concierge mini-game">
      <div class="nc-banner">üéØ ƒÆveik bosƒÖ ‚Äì gauk <b>‚àí20%</b> pirmajam u≈æsakymui</div>
      <canvas id="nc-game" data-css-width="940" data-css-height="320"></canvas>
      <div class="nc-hud">
        <div class="nc-hud-row">
          <span>üñ±Ô∏è Pelƒó</span>
          <div class="bar"><i id="mouseBar"></i></div>
          <b id="mouseHP">100</b>
        </div>
      </div>
      <div class="nc-hint" data-lang="en">Click to shoot. Don‚Äôt want to play? Just sign in or register below.</div>
      <div class="nc-hint" data-lang="lt" style="display:none">Spustelk ‚Äî ≈°≈´vis. Nenori ≈æaisti? ≈Ωemiau tiesiog prisijunk arba registruokis.</div>
      <div class="nc-fs"><button id="btn-fs" title="Full Screen">‚§¢ Full screen</button></div>
      <div class="nc-win" hidden>
        <strong>üéâ Sveikiname! Bosas nugalƒótas.</strong><br>
        Pritaikykite kodƒÖ <code>NOVA20</code> ir gaukite <b>‚àí20%</b> pirmajam u≈æsakymui.
      </div>
    </section>

    <!-- AUTH -->
    <section class="auth-card" id="auth">
      <div class="auth-tabs">
        <button id="tab-login-en" class="active" data-lang="en">Sign in</button>
        <button id="tab-login-lt" class="active" data-lang="lt" style="display:none">Prisijungti</button>
        <button id="tab-register-en" data-lang="en">Create account</button>
        <button id="tab-register-lt" data-lang="lt" style="display:none">Registruotis</button>
      </div>

      <div class="auth-forms">
        <!-- Prisijungti -->
        <form id="form-login" autocomplete="on">
          <div class="full">
            <label for="login-email" data-lang="en">Email</label>
            <label for="login-email" data-lang="lt" style="display:none">El. pa≈°tas</label>
            <input id="login-email" name="email" type="email" placeholder="you@company.com" required>
          </div>
          <div class="full">
            <label for="login-pass" data-lang="en">Password</label>
            <label for="login-pass" data-lang="lt" style="display:none">Slapta≈æodis</label>
            <input id="login-pass" name="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          </div>
          <div class="help full">
            <a href="#" data-lang="en">Forgot password?</a>
            <a href="#" data-lang="lt" style="display:none">Pamir≈°ai slapta≈æodƒØ?</a>
            <div>
              <a class="to-register" href="#" data-lang="en">Create account</a>
              <a class="to-register" href="#" data-lang="lt" style="display:none">Sukurti paskyrƒÖ</a>
            </div>
          </div>
          <div class="actions full">
            <button class="btn primary" type="submit" data-lang="en">Sign in</button>
            <button class="btn primary" type="submit" data-lang="lt" style="display:none">Prisijungti</button>
            <a class="btn ghost" href="/" data-lang="en">Back to site</a>
            <a class="btn ghost" href="/" data-lang="lt" style="display:none">GrƒØ≈æti ƒØ svetainƒô</a>
          </div>
          <p class="note full" data-lang="en">By continuing, you agree to our Terms & Privacy.</p>
          <p class="note full" data-lang="lt" style="display:none">Tƒôsdami, sutinkate su Taisyklƒómis ir Privatumo politika.</p>
        </form>

        <!-- Registruotis -->
        <form id="form-register" class="hidden" style="display:none" autocomplete="on">
          <div>
            <label for="reg-name" data-lang="en">Name</label>
            <label for="reg-name" data-lang="lt" style="display:none">Vardas</label>
            <input id="reg-name" name="name" type="text" placeholder="Vardas, Pavardƒó" required>
          </div>
          <div>
            <label for="reg-company" data-lang="en">Company</label>
            <label for="reg-company" data-lang="lt" style="display:none">ƒÆmonƒó</label>
            <input id="reg-company" name="company" type="text" placeholder="ƒÆmonƒós pavadinimas">
          </div>
          <div>
            <label for="reg-email" data-lang="en">Email</label>
            <label for="reg-email" data-lang="lt" style="display:none">El. pa≈°tas</label>
            <input id="reg-email" name="email" type="email" placeholder="you@company.com" required>
          </div>
          <div>
            <label for="reg-phone" data-lang="en">Phone</label>
            <label for="reg-phone" data-lang="lt" style="display:none">Telefonas</label>
            <input id="reg-phone" name="phone" type="tel" placeholder="+370...">
          </div>
          <div>
            <label for="reg-pass" data-lang="en">Password</label>
            <label for="reg-pass" data-lang="lt" style="display:none">Slapta≈æodis</label>
            <input id="reg-pass" name="password" type="password" placeholder="Ma≈æiausiai 8 simboliai" required minlength="8">
          </div>
          <div>
            <label for="reg-pass2" data-lang="en">Confirm password</label>
            <label for="reg-pass2" data-lang="lt" style="display:none">Pakartok slapta≈æodƒØ</label>
            <input id="reg-pass2" name="password2" type="password" placeholder="Pakartok slapta≈æodƒØ" required minlength="8">
          </div>
          <div class="actions full">
            <button class="btn primary" type="submit" data-lang="en">Create account</button>
            <button class="btn primary" type="submit" data-lang="lt" style="display:none">Sukurti paskyrƒÖ</button>
            <a class="btn ghost" id="switch-to-login-2" href="#" data-lang="en">Have an account? Sign in</a>
            <a class="btn ghost" id="switch-to-login-2-lt" href="#" data-lang="lt" style="display:none">Turi paskyrƒÖ? Prisijunk</a>
          </div>
          <p class="note full" data-lang="en">We‚Äôll never share your data. You can delete your account anytime.</p>
          <p class="note full" data-lang="lt" style="display:none">J≈´s≈≥ duomen≈≥ niekada neplatinsime. PaskyrƒÖ galite i≈°trinti bet kada.</p>
        </form>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap" style="max-width:1120px;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div>¬© <span id="y"></span> Nova Concierge. WhatsApp: +370 681 95678 ¬∑ Email: <a href="mailto:zoe.lirel@gmail.com">zoe.lirel@gmail.com</a></div>
      <div>üíô <span data-lang="en">Privacy-first automations</span><span data-lang="lt" style="display:none">PrivatumƒÖ gerbianƒçios automacijos</span></div>
    </div>
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    function setLang(lang){
      localStorage.setItem('lang', lang);
      $$('[data-lang]').forEach(el => { el.style.display = (el.getAttribute('data-lang')===lang) ? '' : 'none'; });
      $('#btn-en').classList.toggle('active', lang==='en');
      $('#btn-lt').classList.toggle('active', lang==='lt');
      document.documentElement.lang = lang;
    }
    $('#btn-en').onclick = () => setLang('en');
    $('#btn-lt').onclick = () => setLang('lt');
    setLang(localStorage.getItem('lang') || 'lt');

    // Auth tab switch
    const loginForm = $('#form-login');
    const regForm   = $('#form-register');
    function showLogin(){ loginForm.style.display='grid'; regForm.style.display='none'; }
    function showRegister(){ loginForm.style.display='none'; regForm.style.display='grid'; }
    $$('.to-register').forEach(a => a.addEventListener('click', e => { e.preventDefault(); showRegister(); }));
    $('#switch-to-login-2')?.addEventListener('click', e => { e.preventDefault(); showLogin(); });
    $('#switch-to-login-2-lt')?.addEventListener('click', e => { e.preventDefault(); showLogin(); });

    // Simple register validation
    regForm?.addEventListener('submit', (e) => {
      const p1 = $('#reg-pass').value, p2 = $('#reg-pass2').value;
      if(p1 !== p2){ e.preventDefault(); alert('Slapta≈æod≈æiai nesutampa.'); }
    });
  </script>

  <!-- Mini-≈æaidimas: BOSO AKYS seka pelƒô (k≈´nas nestebi); fullscreen; ≈°irdelƒós po 10 hit; ugninis kamuolys -->
  <script>
  (() => {
    const wrap = document.getElementById('nc-game-wrap');
    const C    = document.getElementById('nc-game');
    const ctx  = C.getContext('2d');
    const HUD  = { mouseHP:document.getElementById('mouseHP'), mouseBar:document.getElementById('mouseBar') };
    const WIN  = wrap.querySelector('.nc-win');
    const BTN_FS = document.getElementById('btn-fs');

    const CFG = {
      BOSS_HP_MAX: 1000,      // bosas (logo)
      MOUSE_HP_MAX: 100,      // ≈æaidƒójas (pelƒó) ‚Äì rodomas HUD
      MOUSE_DMG: 0.5,         // pelƒós ≈°≈´vio ≈æala (absoliuti)
      BOSS_BULLET_DMG: 1,     // paprasta boso kulka atima 1 HP
      LOGO_FIRE_MS: 500,      // normali boso ugnis
      FIREBALL_MIN_MS: 6000,  // ugninio kamuolio intervalas (min..max)
      FIREBALL_MAX_MS: 12000,
      BULLET_SPEED: 560,      // px/s
      FIREBALL_SPEED: 420,    // px/s (lƒótesnis, bet pavojingas)
      HEART_TTL_MS: 9000,     // ≈°irdelƒó dings po 9 s
      WIN_SHOW_MS: 6000
    };

    // Canvas @ DPR
    const cssW = Number(C.dataset.cssWidth || 940), cssH = Number(C.dataset.cssHeight || 320);
    function resizeCanvas(){
      const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      C.width = Math.round(cssW*dpr); C.height = Math.round(cssH*dpr);
      C.style.width='100%'; C.style.height='auto';
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    resizeCanvas(); addEventListener('resize', resizeCanvas);

    // Fullscreen
    BTN_FS.addEventListener('click', async () => {
      try{
        if(!document.fullscreenElement){ await wrap.requestFullscreen(); BTN_FS.textContent = '‚§° Exit full screen'; }
        else { await document.exitFullscreen(); BTN_FS.textContent = '‚§¢ Full screen'; }
      }catch(e){ console.warn(e); }
    });

    // B≈´sena
    let engaged = false;                   // pradeda veikti tik paspaudus
    let mouse = { x: cssW*0.8, y: cssH*0.6, hp: CFG.MOUSE_HP_MAX };
    let boss  = { x: cssW*0.2, y: cssH*0.5, hp: CFG.BOSS_HP_MAX }; // bosas nesiseka pelƒós (stovi)
    let bullets = [];     // {x,y,vx,vy,from:'mouse'|'boss',type:'bullet'|'fireball',r}
    let hearts  = [];     // {x,y,expire}
    let then = performance.now(), lastBossShot=0, nextFireballAt=performance.now()+randInt(CFG.FIREBALL_MIN_MS, CFG.FIREBALL_MAX_MS);
    let hitsOnBoss = 0;
    let boom = 0, winTimer = null;

    // ƒÆvestis
    function toCanvas(e){
      const r = C.getBoundingClientRect();
      return { x:(e.clientX-r.left)/(r.width/cssW), y:(e.clientY-r.top)/(r.height/cssH) };
    }
    C.addEventListener('mousemove', e => { const p=toCanvas(e); mouse.x=p.x; mouse.y=p.y; });
    function shootOnce(){
      engaged = true;
      spawnBullet('mouse', boss.x, boss.y, 'bullet');
    }
    C.addEventListener('mousedown', shootOnce);
    C.addEventListener('touchstart', e => { e.preventDefault(); shootOnce(); }, {passive:false});

    // Helpers
    function randInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
    function spawnBullet(from, tx, ty, type='bullet'){
      const s = (from==='boss') ? {x:boss.x,y:boss.y} : {x:mouse.x,y:mouse.y};
      const dx = tx - s.x, dy = ty - s.y, d = Math.hypot(dx,dy)||1;
      const v  = (type==='fireball') ? CFG.FIREBALL_SPEED : CFG.BULLET_SPEED;
      bullets.push({x:s.x,y:s.y,vx:dx/d*v,vy:dy/d*v,from,type,r:(type==='fireball'? 8 : (from==='boss'?4:3))});
    }
    function updateHP(target, dmg){
      target.hp = Math.max(0, target.hp - dmg);
      if(target===mouse){
        HUD.mouseHP.textContent = Math.ceil(target.hp);
        HUD.mouseBar.style.width = (target.hp/CFG.MOUSE_HP_MAX*100)+'%';
      }
      if(target.hp<=0){
        boom = 1;
        if(target===boss){
          WIN.hidden = false; clearTimeout(winTimer);
          winTimer = setTimeout(()=> WIN.hidden = true, CFG.WIN_SHOW_MS);
        }
        setTimeout(resetRound, 1200);
      }
    }
    function resetRound(){
      mouse.hp = CFG.MOUSE_HP_MAX; boss.hp = CFG.BOSS_HP_MAX;
      bullets.length=0; hearts.length=0; hitsOnBoss=0; boom=0;
      HUD.mouseHP.textContent = CFG.MOUSE_HP_MAX; HUD.mouseBar.style.width = '100%';
      nextFireballAt = performance.now()+randInt(CFG.FIREBALL_MIN_MS, CFG.FIREBALL_MAX_MS);
    }
    function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }

    // Pie≈°imas
    function glow(x,y,r,c1=[124,58,237],c2=[34,211,238],a1=.7,a2=.06){
      const g = ctx.createRadialGradient(x,y,4,x,y,r);
      g.addColorStop(0,`rgba(${c1[0]},${c1[1]},${c1[2]},${a1})`);
      g.addColorStop(1,`rgba(${c2[0]},${c2[1]},${c2[2]},${a2})`);
      ctx.fillStyle=g; ctx.beginPath(); ctx.arc(x,y,r,0,6.283); ctx.fill();
    }
    function drawBoss(x,y,tx,ty){
      ctx.save(); ctx.translate(x,y);
      glow(0,0,80); // aura
      // k≈´nas (stovi vietoje)
      ctx.fillStyle='#f5f7ff';
      ctx.beginPath(); ctx.roundRect(-30,-34,60,48,18); ctx.fill();
      ctx.beginPath(); ctx.moveTo(-30,14);
      ctx.quadraticCurveTo(-18,28,-6,14);
      ctx.quadraticCurveTo(6,28,18,14);
      ctx.quadraticCurveTo(28,24,30,18);
      ctx.lineTo(30,34); ctx.lineTo(-30,34); ctx.closePath(); ctx.fill();
      // akys seka pelƒô (pupils)
      const ang = Math.atan2(ty-y, tx-x);
      const ex = Math.cos(ang)*5, ey = Math.sin(ang)*5;
      ctx.fillStyle='#2d3748';
      ctx.beginPath(); ctx.arc(-10+ex,-12+ey,4,0,6.283); ctx.arc(10+ex,-12+ey,4,0,6.283); ctx.fill();
      ctx.restore();
    }
    function drawMouse(x,y){
      glow(x,y,20,[34,211,238],[124,58,237],.35,.02);
      ctx.fillStyle='#a0b4ff'; ctx.beginPath(); ctx.arc(x,y,10,0,6.283); ctx.fill();
      ctx.strokeStyle='rgba(255,255,255,.35)'; ctx.lineWidth=2; ctx.stroke();
    }
    function drawHeart(h){
      ctx.save(); ctx.translate(h.x,h.y);
      ctx.fillStyle='#ff4d6d';
      ctx.beginPath();
      ctx.moveTo(0,6);
      ctx.bezierCurveTo(0,0,-12,-10,-20,-4);
      ctx.bezierCurveTo(-30,4,-18,20,0,28);
      ctx.bezierCurveTo(18,20,30,4,20,-4);
      ctx.bezierCurveTo(12,-10,0,0,0,6);
      ctx.fill();
      ctx.restore();
    }

    function loop(now){
      const dt = Math.min(0.04,(now-then)/1000); then = now;
      ctx.clearRect(0,0,cssW,cssH);

      // Bosas nesiseka pelƒós ‚Äì tik ≈ævilgsnis (akys) orientuojasi ƒØ pelƒô

      // Bosas: paprasti ≈°≈´viai (tik kai ƒØsitraukta)
      if(engaged && now - lastBossShot > CFG.LOGO_FIRE_MS){
        lastBossShot = now; spawnBullet('boss', mouse.x, mouse.y, 'bullet');
      }
      // Ugninis kamuolys kas 6‚Äì12 s
      if(engaged && now >= nextFireballAt){
        spawnBullet('boss', mouse.x, mouse.y, 'fireball');
        nextFireballAt = now + randInt(CFG.FIREBALL_MIN_MS, CFG.FIREBALL_MAX_MS);
      }

      // Kulkos
      for(let i=bullets.length-1;i>=0;i--){
        const b = bullets[i];
        b.x += b.vx*dt; b.y += b.vy*dt;
        // spalvos
        if(b.type==='fireball'){
          const grd = ctx.createRadialGradient(b.x,b.y,1, b.x,b.y,16);
          grd.addColorStop(0,'#ffdd55'); grd.addColorStop(1,'#ff5a2c');
          ctx.fillStyle = grd;
        }else{
          ctx.fillStyle = (b.from==='boss') ? '#7c3aed' : '#22d3ee';
        }
        ctx.beginPath(); ctx.arc(b.x,b.y,b.r,0,6.283); ctx.fill();

        // hit test
        if(b.from==='boss'){
          const hit = Math.hypot(b.x-mouse.x, b.y-mouse.y) < (b.type==='fireball' ? 16 : 12);
          if(hit){
            bullets.splice(i,1);
            if(b.type==='fireball'){ updateHP(mouse, mouse.hp); } // visos gyvybƒós
            else { updateHP(mouse, CFG.BOSS_BULLET_DMG); }
            continue;
          }
        } else {
          if(Math.hypot(b.x-boss.x, b.y-boss.y) < 26){
            bullets.splice(i,1);
            // pelƒós ≈æala absoliuti
            updateHP(boss, CFG.MOUSE_DMG);
            hitsOnBoss++;
            if(hitsOnBoss % 10 === 0){ // kas 10 pataikym≈≥ ‚Äì ≈°irdelƒó
              const hx = clamp(Math.random()*cssW, 40, cssW-40);
              const hy = clamp(Math.random()*cssH, 40, cssH-40);
              hearts.push({x:hx,y:hy,expire: now + CFG.HEART_TTL_MS});
            }
            continue;
          }
        }
        // out of bounds
        if(b.x<0||b.y<0||b.x>cssW||b.y>cssH) bullets.splice(i,1);
      }

      // ≈†irdelƒós rodymas/pasƒómimas
      for(let i=hearts.length-1;i>=0;i--){
        const h = hearts[i];
        if(now > h.expire){ hearts.splice(i,1); continue; }
        drawHeart(h);
        if(Math.hypot(mouse.x-h.x, mouse.y-h.y) < 20){
          // +1 gyvybƒó (iki max)
          mouse.hp = Math.min(CFG.MOUSE_HP_MAX, mouse.hp + 1);
          HUD.mouseHP.textContent = Math.ceil(mouse.hp);
          HUD.mouseBar.style.width = (mouse.hp/CFG.MOUSE_HP_MAX*100)+'%';
          hearts.splice(i,1);
        }
      }

      // Pie≈°imas
      drawBoss(boss.x,boss.y, mouse.x,mouse.y);
      drawMouse(mouse.x,mouse.y);

      requestAnimationFrame(loop);
    }

    // Start
    HUD.mouseHP.textContent = CFG.MOUSE_HP_MAX; HUD.mouseBar.style.width = '100%';
    document.addEventListener('visibilitychange',()=>{ if(document.visibilityState==='visible'){ then = performance.now(); }});
    requestAnimationFrame(t=>{ then=t; loop(t); });
  })();
  </script>
</body>
</html>
